steps:
  # Step 1: Print a message to confirm build started
  - name: 'alpine'
    entrypoint: 'sh'
    args: ['-c', 'echo Build started on Google Cloud!']

  # Step 2: Run basic commands
  - name: 'alpine'
    entrypoint: 'sh'
    args: ['-c', 'ls -la']

  # Step 3: Install dependencies and run Python script
  - name: 'python:3.12'
    entrypoint: 'sh'
    args: ['-c', 'echo Build started on Google Cloud! && pip install -r req/requirements.txt && python main.py']

  # Step 4: Print directory structure
  - name: 'python:3.12'
    entrypoint: 'sh'
    args: ['-c', 'ls -al']

  # Step 5: Build Docker image with build ID as the tag
  - name: 'docker'
    entrypoint: 'sh'
    args: ['-c', 'docker build -t gcr.io/$PROJECT_ID/nk:$BUILD_ID .']

  # Step 6: Push Docker image to Google Container Registry
  - name: 'docker'
    entrypoint: 'sh'
    args: ['-c', 'docker push gcr.io/$PROJECT_ID/nk:$BUILD_ID']

  # Step 7: Print the build success message
  - name: 'alpine'
    entrypoint: 'sh'
    args: ['-c', 'echo Build finished successfully!']

# Specify logging options
options:
  logging: CLOUD_LOGGING_ONLY
